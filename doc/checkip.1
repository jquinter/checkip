.\" Text automatically generated by txt2man
.TH checkip 1 "10 January 2014" "" ""
.SH NAME
\fBCheckip \fP- Simple script to monitor your external IP and report a change to a user-defined email address. Useful if you manage remote boxes whose external IP addresses change periodically.
\fB
.SH SYNOPSIS
.nf
.fam C
\fBcheckip\fP [\fIoption\fP]

.fam T
.fi
.fam T
.fi
.SH OPTIONS
.TP
.B
m
Send a test email then exit.
.TP
.B
c
Check IP against IP on record and send notification mail if different.
.SH REQUIREMENTS
Checkip requires either heirloom-mailx[1] or mailsend[2] in order to send the notifications. Mailx requires a configuration of itsown to work. Mailsend on the other hand should work properly with the checkip.conf settings assuming users have it properly setup.
.PP
Although it is technically beyond the scope of \fBcheckip\fP, below is an example mailx configuration file (~/.mailrc) using a gmail account. If you use other mail services, please consult the mailx man page or google.
.PP
.nf
.fam C
 account gmail {
 set smtp-use-starttls
 set smtp=smtp://smtp.gmail.com:587
 set smtp-auth=login
 set smtp-auth-user='myusername'
 set smtp-auth-password='MYp4$$w0rd'
 set from='myusername@gmail.com'
 }

.fam T
.fi
.IP 1. 4
http://heirloom.sourceforge.net/mailx.html
.IP 2. 4
https://code.google.com/p/mailsend/
.SH CONFIG FILE
Checkip will create $HOME/.config/checkip.conf the first time it is invoked. Users must define the variables therein prior to invoking the script a 2nd time. The file is well commented and self-explanatory.
.SH RECOMMENDED USAGE
Users may optionally send a test email to the target address:
.PP
.nf
.fam C
 $ checkip m

.fam T
.fi
.SS RUNNING THE CHECK
When happy that the setup is correct, users can invoke the script to check the IP against the last-known IP:
.PP
.nf
.fam C
 $ checkip c

.fam T
.fi
Invoking the script via a crontab is the recommended. Below is an example invoking the script once, every 4 hours:
.PP
.nf
.fam C
 $ crontab -e
 0 */4 * * * /usr/bin/checkip c &> /dev/null

.fam T
.fi
.SH NOTICE FOR USERS OF PEERGUARDIAN LINUX
Users running PeerGaurdian Linux will need to edit /etc/pgl/pglcmd.conf and allow either '465' (for SSL) or '587' (for STARTTLS) to the WHITE_TCP_OUT section.
.SH CONTRIBUTE
Should you wish to contribute to this code, please fork and send a pull request. Source is freely available on github: https://github.com/graysky2/\fBcheckip\fP
.SH BUGS
None known.
.SH TODO
Add support for neither SSL or SMARTTLS servers. I do not have access to one at the moment.
.SH AUTHOR
graysky (graysky AT archlinux DOT us)
